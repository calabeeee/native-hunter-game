<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Native Hunter Game</title>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; }
        canvas { background: lightgreen; display: block; margin: auto; }
        button { margin-top: 10px; padding: 10px; font-size: 16px; }
        #instructions { font-size: 18px; margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Native Hunter Game</h1>
    <p id="instructions">
        Instructions: Move the hunter with the left and right arrow keys. Walk over the shaft and spearhead to pick them up. Click to glue the spearhead to the shaft. Press spacebar to throw the spear at the deer.
    </p>
    <canvas id="gameCanvas" width="600" height="400"></canvas>
    <button onclick="restartGame()">Restart</button>
    
    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");

        // Load images
        const hunterImage = new Image();
        hunterImage.src = 'nativehunter.png';  // Update the path if needed

        const deerImage = new Image();
        deerImage.src = 'deer.png';  // Update the path if needed

        // Define game objects
        let hunter = { x: 50, y: 300, width: 40, height: 60, hasShaft: false, hasSpearhead: false };
        let deer = { x: 500, y: 280, width: 50, height: 50, direction: 1 };

        let shaft = { x: 100, y: 280, width: 10, height: 60 };
        let spearhead = { x: 200, y: 240, width: 20, height: 20 };

        let spear = { x: hunter.x + 20, y: hunter.y + 10, width: 30, height: 5, thrown: false };
        
        let glueApplied = false;

        // Handle key events
        document.addEventListener("keydown", moveHunter);
        document.addEventListener("keydown", throwSpear);
        canvas.addEventListener("click", applyGlue);

        // Move the hunter left or right
        function moveHunter(event) {
            if (event.key === "ArrowLeft" && hunter.x > 0) hunter.x -= 20;
            if (event.key === "ArrowRight" && hunter.x < canvas.width - hunter.width) hunter.x += 20;

            // Check if hunter picks up the shaft or spearhead
            if (!hunter.hasShaft && hunter.x + hunter.width > shaft.x && hunter.x < shaft.x + shaft.width) {
                hunter.hasShaft = true;
                shaft.x = -100;  // Move shaft off-screen once picked up
            }
            if (!hunter.hasSpearhead && hunter.x + hunter.width > spearhead.x && hunter.x < spearhead.x + spearhead.width) {
                hunter.hasSpearhead = true;
                spearhead.x = -100;  // Move spearhead off-screen once picked up
            }
        }

        // Apply glue by clicking on the canvas
        function applyGlue(event) {
            if (hunter.hasShaft && hunter.hasSpearhead && !glueApplied) {
                glueApplied = true;
                spear.x = hunter.x + 20;  // Position spear next to hunter
                spear.y = hunter.y + 10;
            }
        }

        // Throw the spear when Spacebar is pressed
        function throwSpear(event) {
            if (event.key === " " && glueApplied && !spear.thrown) {
                spear.thrown = true;  // Spear is now thrown
            }
        }

        // Update game state
        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw the hunter
            ctx.drawImage(hunterImage, hunter.x, hunter.y, hunter.width, hunter.height);
            ctx.fillText("Hunter", hunter.x + 10, hunter.y + 10);

            // Draw the deer (moving up and down)
            ctx.drawImage(deerImage, deer.x, deer.y, deer.width, deer.height);
            deer.y += deer.direction;
            if (deer.y > canvas.height - deer.height || deer.y < 0) {
                deer.direction *= -1;  // Bounce the deer up and down
            }
            ctx.fillText("Deer", deer.x + 10, deer.y + 10);

            // Draw the shaft and spearhead if not picked up yet
            if (!hunter.hasShaft) {
                ctx.fillStyle = "brown";
                ctx.fillRect(shaft.x, shaft.y, shaft.width, shaft.height);
                ctx.fillText("Shaft", shaft.x + 10, shaft.y + 10);
            }
            if (!hunter.hasSpearhead) {
                ctx.fillStyle = "gray";
                ctx.fillRect(spearhead.x, spearhead.y, spearhead.width, spearhead.height);
                ctx.fillText("Spearhead", spearhead.x + 10, spearhead.y + 10);
            }

            // Draw thrown spear
            if (spear.thrown) {
                spear.x += 10;  // Spear moves right
            }

            ctx.fillStyle = "gray";
            ctx.fillRect(spear.x, spear.y, spear.width, spear.height);

            // Collision with the deer
            if (spear.x > deer.x && spear.x < deer.x + deer.width && spear.y > deer.y && spear.y < deer.y + deer.height) {
                alert("You caught the deer!");
                spear.thrown = false;
                spear.x = hunter.x + 20;
                spear.y = hunter.y + 10;
                glueApplied = false;  // Reset the glue state
                hunter.hasShaft = false;  // Reset item pickup states
                hunter.hasSpearhead = false;
                shaft.x = 100;  // Reset shaft position
                spearhead.x = 200;  // Reset spearhead position
            }

            requestAnimationFrame(update);  // Keep updating the game
        }

        // Restart game
        function restartGame() {
            hunter.x = 50;
            hunter.y = 300;
            glueApplied = false;
            spear.thrown = false;
            spear.x = hunter.x + 20;
            spear.y = hunter.y + 10;
            deer.y = 280;  // Reset deer position
            hunter.hasShaft = false;
            hunter.hasSpearhead = false;
            shaft.x = 100;
            spearhead.x = 200;
        }

        // Start game loop
        update();  
    </script>
</body>
</html>
